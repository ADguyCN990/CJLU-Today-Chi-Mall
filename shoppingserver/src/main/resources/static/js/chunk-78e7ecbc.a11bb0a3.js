(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78e7ecbc"],{"3e6f":function(t,e,a){"use strict";a("ed26")},"5ebe":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("el-row",{attrs:{id:"description"}},[a("el-col",{attrs:{span:4}},[a("img",{staticStyle:{width:"100%","border-radius":"15px"},attrs:{src:t.detail.img,alt:"",onerror:"this.src='//iconfont.alicdn.com/s/210a299f-edad-4fc5-8396-9f743633f209_origin.svg';"}})]),a("el-col",{attrs:{span:20}},[a("div",{staticStyle:{"text-align":"left",padding:"10px 20px"}},[a("p",{staticStyle:{"font-weight":"bold","margin-top":"5px"}},[t._v(t._s(t.detail.goodsName))]),a("p",{staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(t.detail.description))]),a("p",{staticStyle:{color:"#666666",position:"absolute",bottom:"12px"}},[a("i",{staticClass:"el-icon-s-shop",staticStyle:{"font-size":"25px"}}),t._v(" "+t._s(t.detail.storeName)+" "),a("el-button",{staticStyle:{padding:"0","font-size":"18px"},attrs:{type:"text"},on:{click:t.enterShop}},[t._v(" 进店逛逛>>")])],1),a("br")])]),a("span",{staticClass:"price"},[t._v("￥"+t._s(t.detail.price))]),a("div",{staticStyle:{position:"absolute",bottom:"20px",right:"20px"}},[a("el-button",{attrs:{type:"primary",round:""},on:{click:t.addToCart}},[t._v("加入购物车")]),a("el-button",{attrs:{type:"primary",round:""},on:{click:t.buyNow}},[t._v("立即购买")])],1)],1),a("div",{attrs:{id:"comment"}},[a("br"),t._m(0),a("hr"),a("br"),0===t.comments.length?a("div",[a("p",[t._v("暂无评价")])]):t._l(t.comments,(function(t){return a("Comment",{key:t.id,attrs:{data:t}})})),a("el-pagination",{ref:"page",attrs:{background:"",layout:"total, prev, pager, next","page-size":5,total:t.totalComments},on:{"current-change":t.currentChange}})],2)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",[a("i",{staticClass:"el-icon-chat-dot-square",staticStyle:{"font-size":"larger",position:"relative",top:"3px"}}),t._v(" 用户评价 ")])}],o=a("b85c"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment"},[a("el-row",[a("span",{staticStyle:{position:"absolute",right:"20px",color:"#888888"}},[t._v(t._s(t.commentData.date))]),a("div",{staticStyle:{position:"absolute"}},[a("el-avatar",{attrs:{size:50}},[a("img",{staticStyle:{width:"50px"},attrs:{src:t.commentData.avatar}})])],1),a("div",{staticStyle:{"margin-left":"70px"}},[a("div",{staticStyle:{height:"30px","margin-top":"10px"}},[a("div",{staticStyle:{"font-weight":"bold","margin-bottom":"10px",float:"left"}},[t._v(" "+t._s(t.commentData.nickname)+" ")]),a("div",{staticStyle:{float:"left","margin-left":"30px"}},[a("el-rate",{attrs:{colors:t.colors,disabled:""},model:{value:t.commentData.stars,callback:function(e){t.$set(t.commentData,"stars",e)},expression:"commentData.stars"}})],1)]),a("div",{staticClass:"comment-content"},[t._v(" "+t._s(t.commentData.content)+" ")])]),a("div",[a("div",{staticStyle:{width:"100px",float:"right"}},[a("i",{ref:"cai",staticClass:"iconfont icon-ali-cai icons",staticStyle:{position:"relative",top:"2px"},on:{click:t.cai}}),a("span",{staticStyle:{"font-size":"20px",float:"left"}},[t._v(" ("+t._s(t.commentData.numOfCai)+")")])]),a("div",{staticStyle:{width:"100px",float:"right"}},[a("i",{ref:"zan",staticClass:"iconfont icon-ali-zan icons",on:{click:t.zan}}),a("span",{staticStyle:{"font-size":"20px",float:"left"}},[t._v(" ("+t._s(t.commentData.numOfZan)+")")])]),a("div",{staticStyle:{width:"60px",float:"right"}},[a("i",{staticClass:" el-icon-chat-line-round icons",staticStyle:{"font-size":"28px",position:"relative",top:"-2px"}})])])])],1)},r=[],c={name:"Comment",props:["data"],data:function(){return{commentData:null,colors:["#99A9BF","#F7BA2A","#FF9900"],zanClicked:!1,caiClicked:!1}},methods:{zan:function(){this.caiClicked?this.zanClicked?(this.zanClicked=!1,this.commentData.numOfZan--,this.$refs.zan.style.color="black"):(this.zanClicked=!0,this.commentData.numOfZan++,this.caiClicked=!1,this.commentData.numOfCai--,this.$refs.zan.style.color="rgb(18,150,219)",this.$refs.cai.style.color="black"):(this.zanClicked=!this.zanClicked,this.zanClicked?(this.commentData.numOfZan++,this.$refs.zan.style.color="rgb(18,150,219)"):(this.commentData.numOfZan--,this.$refs.zan.style.color="black"))},cai:function(){this.zanClicked?this.caiClicked?(this.caiClicked=!1,this.numOfCai--,this.$refs.cai.style.color="black"):(this.caiClicked=!0,this.commentData.numOfCai++,this.zanClicked=!1,this.commentData.numOfZan--,this.$refs.cai.style.color="rgb(18,150,219)",this.$refs.zan.style.color="black"):(this.caiClicked=!this.caiClicked,this.caiClicked?(this.commentData.numOfCai++,this.$refs.cai.style.color="rgb(18,150,219)"):(this.commentData.numOfCai--,this.$refs.cai.style.color="black"))}},created:function(){this.commentData=this.data}},l=c,d=(a("3e6f"),a("2877")),m=Object(d["a"])(l,n,r,!1,null,"80e60eac",null),u=m.exports,p={components:{Comment:u},data:function(){return{detail:{goodsName:null,img:null,storeId:null,description:null,price:null,skuId:null},totalComments:0,totalCommentsPages:0,comments:[]}},methods:{addToCart:function(){var t=this;localStorage.getItem("userInform")?this.$http.post("/shopcart/add",{productId:this.$route.params.id,userId:JSON.parse(localStorage.getItem("userInform")).userId,productPrice:this.detail.price,skuId:this.detail.skuId}).then((function(e){1e4===e.code&&t.$message.success("添加成功！")})):this.$message.warning("请先登录！")},buyNow:function(){var t=this;if(localStorage.getItem("userInform"))return JSON.parse(localStorage.getItem("userInform")).realname&&JSON.parse(localStorage.getItem("userInform")).userMobile&&JSON.parse(localStorage.getItem("userInform")).userAddress?void this.$http.post("/order/addInstance?productId="+this.$route.params.id,{userId:JSON.parse(localStorage.getItem("userInform")).userId,receiverName:JSON.parse(localStorage.getItem("userInform")).realname,receiverMobile:JSON.parse(localStorage.getItem("userInform")).userMobile,receiverAddress:JSON.parse(localStorage.getItem("userInform")).userAddress}).then((function(e){1e4===e.code?(t.$message.success("购买成功！"),console.log(e.data.orderId)):t.$message.error(e.msg)})):(this.$message.warning("请完善个人信息！"),void setTimeout((function(){t.$router.push("/personal/personal")}),2500));this.$message.warning("请先登录！")},enterShop:function(){this.$router.push("/shop/"+this.detail.storeId)},getCommentByPage:function(t,e){var a=this;this.$http.get("/product/detail-comments/"+this.$route.params.id,{pageNum:t,limit:e}).then((function(t){if(1e4===t.code){a.totalComments=t.data.count,a.totalCommentsPages=t.data.pageCount,a.comments=[];var e,s=Object(o["a"])(t.data.list);try{for(s.s();!(e=s.n()).done;){var i=e.value;a.comments.push({id:i.commId,stars:i.commType,avatar:i.userImg,nickname:i.nickname,date:i.replyTime?i.replyTime.substring(0,10):null,content:i.commContent,numOfZan:Math.floor(100*Math.random()),numOfCai:Math.floor(100*Math.random())})}}catch(n){s.e(n)}finally{s.f()}}}))},currentChange:function(t){this.getCommentByPage(t,5)}},created:function(){var t=this;this.$http.get("/product/detail-info/"+this.$route.params.id).then((function(e){1e4===e.code&&(t.detail={goodsName:e.data.product.productName,img:e.data.productImgs&&e.data.productImgs.length?e.data.productImgs[0].url:"//iconfont.alicdn.com/s/210a299f-edad-4fc5-8396-9f743633f209_origin.svg",storeId:e.data.product.shopID,description:e.data.product.content,price:e.data.productSkus&&e.data.productSkus.length?e.data.productSkus[0].sellPrice:null,skuId:e.data.productSkus&&e.data.productSkus.length?e.data.productSkus[0].skuId:null},t.getCommentByPage(1,5))}))}},h=p,f=(a("b414"),Object(d["a"])(h,s,i,!1,null,"efe7e6e2",null));e["default"]=f.exports},"610d":function(t,e,a){},b414:function(t,e,a){"use strict";a("610d")},ed26:function(t,e,a){}}]);
//# sourceMappingURL=chunk-78e7ecbc.a11bb0a3.js.map