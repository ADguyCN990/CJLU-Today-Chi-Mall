(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eef24c4"],{"11ef":function(e,t,o){},cd15:function(e,t,o){"use strict";o("11ef")},e6aa:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"personalManage"}},[o("div",{staticStyle:{height:"100px"}},[o("div",{staticStyle:{"text-align":"left",float:"left"}},[o("el-upload",{staticClass:"upload-demo",staticStyle:{width:"100px"},attrs:{action:"","before-upload":e.beforeUpload,"show-file-list":!1,"file-list":e.fileList}},[o("el-avatar",{attrs:{size:100,src:e.fileList[0].url}})],1)],1),o("div",{staticStyle:{float:"left","font-size":"35px",color:"#666666",position:"relative",top:"65px",left:"20px"}},[e._v(" "+e._s(this.nickname)+" ")])]),o("br"),o("hr",{staticStyle:{color:"black"}}),o("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[o("div",{staticClass:"card"},[o("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:e.form1,"label-width":"90px"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"昵称"}},[o("el-input",{model:{value:e.form1.nickname,callback:function(t){e.$set(e.form1,"nickname",t)},expression:"form1.nickname"}})],1),o("el-form-item",{attrs:{label:"真实姓名"}},[o("el-input",{model:{value:e.form1.realname,callback:function(t){e.$set(e.form1,"realname",t)},expression:"form1.realname"}})],1),o("el-form-item",{attrs:{label:"性别"}},[o("el-radio",{attrs:{label:"男"},model:{value:e.form1.userSex,callback:function(t){e.$set(e.form1,"userSex",t)},expression:"form1.userSex"}},[e._v("男")]),o("el-radio",{attrs:{label:"女"},model:{value:e.form1.userSex,callback:function(t){e.$set(e.form1,"userSex",t)},expression:"form1.userSex"}},[e._v("女")])],1),o("el-form-item",{attrs:{label:"收货地址"}},[o("el-input",{model:{value:e.form1.userAddress,callback:function(t){e.$set(e.form1,"userAddress",t)},expression:"form1.userAddress"}})],1),o("el-form-item",{attrs:{label:"邮箱"}},[o("el-input",{model:{value:e.form1.userEmail,callback:function(t){e.$set(e.form1,"userEmail",t)},expression:"form1.userEmail"}})],1),o("el-form-item",{attrs:{label:"电话号码"}},[o("el-input",{model:{value:e.form1.userMobile,callback:function(t){e.$set(e.form1,"userMobile",t)},expression:"form1.userMobile"}})],1),o("el-form-item",[o("el-button",{staticStyle:{float:"right",width:"100px"},attrs:{type:"primary",round:""},on:{click:e.submitBasicInfo}},[e._v("修改 ")])],1)],1)],1)],1)],1)]),o("el-tab-pane",{attrs:{label:"修改密码",name:"second"}},[o("div",{staticClass:"card"},[o("el-form",{ref:"form",staticStyle:{"text-align":"left"},attrs:{model:e.form2,"label-width":"90px"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"旧密码"}},[o("el-input",{model:{value:e.form2.oldPassword,callback:function(t){e.$set(e.form2,"oldPassword",t)},expression:"form2.oldPassword"}})],1),o("el-form-item",{attrs:{label:"新密码"}},[o("el-input",{model:{value:e.form2.newPassword,callback:function(t){e.$set(e.form2,"newPassword",t)},expression:"form2.newPassword"}})],1),o("el-form-item",{attrs:{label:"确认新密码"}},[o("el-input",{model:{value:e.form2.newPasswordConfirm,callback:function(t){e.$set(e.form2,"newPasswordConfirm",t)},expression:"form2.newPasswordConfirm"}})],1),o("el-form-item",[o("el-button",{staticStyle:{float:"right",width:"100px"},attrs:{type:"primary",round:""},on:{click:e.submitPassword}},[e._v("修改 ")])],1)],1)],1)],1)],1)]),o("el-tab-pane",{attrs:{label:"我的会员",name:"third"}},[o("div",{staticClass:"card"},[e.form1.vip?o("div",[o("p",{staticStyle:{color:"red"}},[e._v("您是尊贵的会员用户")])]):o("div",[o("p",[e._v("您还不是会员哦")]),o("div",[e._v(" 立即 "),o("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("注册会员")])],1)])])]),o("el-tab-pane",{attrs:{label:"申请开店",name:"fourth"}},[o("div",{staticClass:"card"},[e.isStoreOwner?o("div",[o("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text"},on:{click:function(t){return e.$router.replace("/personal/store")}}},[e._v(" 你已经是店主了，快去管理你的店铺吧>> ")])],1):o("div",[o("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text"},on:{click:function(t){return e.openShop()}}},[e._v(" 立即申请开店 ")])],1)])])],1),o("el-dialog",{attrs:{title:"注册会员",visible:e.dialogVisible,width:"25%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("span",{staticStyle:{"font-size":"16px"}},[e._v("确定注册会员吗？")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.registerMembership}},[e._v("确 定")])],1)]),o("el-dialog",{attrs:{title:"申请开店",visible:e.dialogVisible2,width:"30%","lock-scroll":!1},on:{"update:visible":function(t){e.dialogVisible2=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"店铺名称"}},[o("el-input",{model:{value:e.form.shopName,callback:function(t){e.$set(e.form,"shopName",t)},expression:"form.shopName"}})],1),o("el-form-item",{attrs:{label:"店铺描述"}},[o("el-input",{model:{value:e.form.shopDescription,callback:function(t){e.$set(e.form,"shopDescription",t)},expression:"form.shopDescription"}})],1),o("el-form-item",{attrs:{label:"开店人姓名"}},[o("el-input",{model:{value:e.form.shopKeeperName,callback:function(t){e.$set(e.form,"shopKeeperName",t)},expression:"form.shopKeeperName"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},r=[],a=(o("ac1f"),o("5319"),o("e9c4"),{name:"PersonalManage",data:function(){return{nickname:null,form1:{},form2:{oldPassword:"",newPassword:"",newPasswordConfirm:""},form:{shopName:"",shopDescription:"",shopKeeperName:""},activeName:"first",fileList:[{url:""}],applied:!1,isMembership:!0,isStoreOwner:!0,isAdministrator:!0,dialogVisible:!1,dialogVisible2:!1}},methods:{submitBasicInfo:function(){var e=this;this.$confirm("确定修改个人资料吗").then((function(){e.$http.post("user/updateInfo",e.form1).then((function(t){1e4===t.code&&(e.getInfo(),e.$message.success("修改成功！"))}))}))},submitPassword:function(){var e=this;this.$confirm("确定修改密码吗？").then((function(){e.form2.newPassword===e.form2.newPasswordConfirm?JSON.parse(localStorage.getItem("userInform")).password===e.form2.oldPassword?e.$http.post("user/updateInfo",{userId:e.form1.userId,password:e.form2.newPassword}).then((function(t){1e4===t.code&&(e.$message.success("修改密码成功，请重新登录！"),setTimeout((function(){localStorage.clear(),e.$router.replace("/login")}),3e3))})):e.$message.warning("旧密码错误！"):e.$message.warning("密码和确认密码不一致！")}))},registerMembership:function(){var e=this;this.dialogVisible=!1,this.$http.get("user/becomevip",{username:JSON.parse(localStorage.getItem("userInform")).username}).then((function(t){1e4===t.code&&(e.$message.info("注册会员成功！"),e.form1.vip=!0)}))},openShop:function(){"true"!==localStorage.getItem("applied")?this.dialogVisible2=!0:this.$message.warning("请不要重复申请！")},confirm:function(){var e=this;this.$http.post("/shop/add",this.form).then((function(t){1e4===t.code?(e.applied=!0,localStorage.setItem("applied","true"),e.$message.success("申请成功，请等待管理员审核！")):e.$message.error(t.msg),e.dialogVisible2=!1}))},beforeUpload:function(e){var t=this,o=new FormData;return o.append("file",e),o.append("productId",JSON.parse(localStorage.getItem("userInform")).userId),this.$http.post("file/userimg",o).then((function(e){1e4===e.code?t.$message.success("操作成功！"):t.$message.error(e.msg)})),!1},getInfo:function(){var e=this;this.$http.get("user/info").then((function(t){1e4===t.code?(localStorage.setItem("userInform",JSON.stringify(t.data)),e.fileList[0].url=t.data.userImg,e.form1=t.data,e.nickname=t.data.nickname,e.isStoreOwner=t.data.shopKeeper):e.$message.error(t.msg)}))}},created:function(){this.getInfo()}}),i=a,l=(o("cd15"),o("2877")),n=Object(l["a"])(i,s,r,!1,null,"431ec819",null);t["default"]=n.exports},e9c4:function(e,t,o){var s=o("23e7"),r=o("da84"),a=o("d066"),i=o("2ba4"),l=o("e330"),n=o("d039"),c=r.Array,f=a("JSON","stringify"),m=l(/./.exec),u=l("".charAt),d=l("".charCodeAt),p=l("".replace),b=l(1..toString),h=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,v=/^[\uDC00-\uDFFF]$/,w=function(e,t,o){var s=u(o,t-1),r=u(o,t+1);return m(g,e)&&!m(v,r)||m(v,e)&&!m(g,s)?"\\u"+b(d(e,0),16):e},x=n((function(){return'"\\udf06\\ud834"'!==f("\udf06\ud834")||'"\\udead"'!==f("\udead")}));f&&s({target:"JSON",stat:!0,forced:x},{stringify:function(e,t,o){for(var s=0,r=arguments.length,a=c(r);s<r;s++)a[s]=arguments[s];var l=i(f,null,a);return"string"==typeof l?p(l,h,w):l}})}}]);
//# sourceMappingURL=chunk-7eef24c4.21c8b233.js.map