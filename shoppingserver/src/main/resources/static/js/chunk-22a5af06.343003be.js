(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22a5af06"],{"42d4":function(t,e,o){"use strict";o("6e5c")},"6e5c":function(t,e,o){},"8b08":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{position:"relative",left:"250px",width:"84%"}},[1===t.storeStatus?o("div",[o("h4",{staticStyle:{"text-align":"left"}},[t._v("商品管理")]),o("p",{staticStyle:{"font-size":"18px","margin-right":"30px"}},[t._v(t._s(this.storeName))]),o("el-table",{staticStyle:{width:"100%","font-size":"16px","border-radius":"10px","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.3)"},attrs:{data:t.singlePageOrdersList,border:"",stripe:"","empty-text":"暂无数据"}},[o("el-table-column",{attrs:{label:"商品 ID",sortable:"",prop:"goodsId"}}),o("el-table-column",{attrs:{label:"商品名称",sortable:"",prop:"name",width:"200"}}),o("el-table-column",{attrs:{label:"价格",sortable:"",width:"120",prop:"sellPrice"}}),o("el-table-column",{attrs:{label:"分类",sortable:"",prop:"category",width:"150"}}),o("el-table-column",{attrs:{label:"库存",sortable:"",prop:"stock",width:"150"}}),o("el-table-column",{attrs:{label:"图片",prop:"img"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{trigger:"hover",placement:"right-end","close-delay":0}},[o("img",{attrs:{src:e.row.img,alt:"加载失败"}}),o("div",{staticClass:"name-wrapper",staticStyle:{width:"70px"},attrs:{slot:"reference"},slot:"reference"},[o("el-tag",{attrs:{size:"medium"}},[t._v("查看图片")])],1)])]}}],null,!1,440847968)}),o("el-table-column",{attrs:{label:"描述",prop:"description",width:"500"}}),o("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"success",round:""},on:{click:function(o){return t.modify(e.row.goodsId)}}},[t._v("编辑")]),o("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(o){return t.deleteGoods(e.row.goodsId)}}},[o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{slot:"reference",type:"danger",round:""},slot:"reference"},[t._v("删除")])],1)]}}],null,!1,2949433612)})],1),o("br"),o("br"),o("div",{staticStyle:{display:"inline-block",float:"right"}},[o("el-button",{staticStyle:{float:"left","margin-bottom":"20px"},attrs:{type:"primary",round:""},on:{click:t.add}},[t._v(" 添加商品 ")])],1),o("div",{staticStyle:{display:"inline-block"}},[o("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","page-size":t.pageSize,total:t.totalOrders},on:{"current-change":t.currentChange}})],1),o("br"),o("el-dialog",{attrs:{visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.closeDialog}},[o("el-form",{staticStyle:{"text-align":"left"},attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"商品名称","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"inputWidth",attrs:{autocomplete:"off"},model:{value:t.form.productName,callback:function(e){t.$set(t.form,"productName",e)},expression:"form.productName"}})],1),o("el-form-item",{attrs:{label:"商品类别","label-width":t.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择商品类别"},model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}},t._l(this.categories,(function(t){return o("el-option",{key:t.categoryId,attrs:{label:t.categoryName,value:t.categoryId}})})),1)],1),o("el-form-item",{attrs:{label:"商品图片","label-width":t.formLabelWidth}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{width:"300px"},attrs:{action:"","before-upload":t.beforeUpload,limit:1,"list-type":"picture","auto-upload":!1}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("图片比例为1:1")])],1)],1),o("el-form-item",{attrs:{label:"售价","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"inputWidth",attrs:{autocomplete:"off"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),o("el-form-item",{attrs:{label:"库存","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"inputWidth",attrs:{autocomplete:"off"},model:{value:t.form.stock,callback:function(e){t.$set(t.form,"stock",e)},expression:"form.stock"}})],1),o("el-form-item",{attrs:{label:"描述信息","label-width":t.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入描述信息"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submitForm1}},[t._v("确 定")])],1)],1)],1):o("div",[o("p",{staticStyle:{"margin-top":"38vh"}},[t._v("您已成功申请开店，请等待管理员审核！")])])])},r=[],s=o("b85c"),l=(o("b0c0"),o("a4d3"),o("e01a"),o("fb6a"),{name:"StoreManage",data:function(){return{storeId:null,storeName:"",storeStatus:null,tableData:[],selectedGoodsId:null,dialogFormVisible:!1,dialogType:0,form:{productName:"",categoryId:"",productImg:"",price:null,stock:null,content:""},categories:[],currentPage:1,totalOrders:0,pageSize:8,singlePageOrdersList:[],formLabelWidth:"120px"}},methods:{add:function(){this.dialogFormVisible=!0,this.dialogType=0},modify:function(t){this.selectedGoodsId=t,this.dialogFormVisible=!0,this.dialogType=1;var e,o=Object(s["a"])(this.tableData);try{for(o.s();!(e=o.n()).done;){var a=e.value;if(this.selectedGoodsId===a.goodsId){this.form.productName=a.name,this.form.categoryId=a.categoryId,this.form.price=a.sellPrice,this.form.stock=a.stock,this.form.content=a.description;break}}}catch(r){o.e(r)}finally{o.f()}},deleteGoods:function(t){alert(t)},closeDialog:function(){this.form={productName:"",categoryId:"",productImg:"",price:null,stock:null,content:""}},submitForm1:function(){var t=this,e={productName:this.form.productName,categoryId:this.form.categoryId,rootCategoryId:0,content:this.form.content,shopID:this.storeId,productStatus:1,skus:[{sellPrice:this.form.price,stock:this.form.stock,status:1}]};1===this.dialogType&&(e.productId=this.selectedGoodsId),this.$http.post(1===this.dialogType?"/shop/updateproduct":"/shop/addproduct",e).then((function(e){1e4===e.code?(t.$message.success("操作成功"),t.getGoodsList()):t.$message.error("未知错误")})),this.dialogFormVisible=!1},getGoodsList:function(){var t=this;this.$http.get("shop/list",{shopID:this.storeId}).then((function(e){if(1e4===e.code){t.tableData=[];var o,a=Object(s["a"])(e.data);try{for(a.s();!(o=a.n()).done;){var r,l=o.value,i=void 0,c=Object(s["a"])(t.categories);try{for(c.s();!(r=c.n()).done;){var n=r.value;n.categoryId===l.categoryId&&(i=n.categoryName)}}catch(d){c.e(d)}finally{c.f()}t.tableData.push({goodsId:parseInt(l.productId),name:l.productName,sellPrice:l.skus&&0!==l.skus.length?l.skus[0].sellPrice:null,categoryId:l.categoryId,category:i,description:l.content,img:l.imgs&&0!==l.imgs.length?l.imgs[0].url:null,stock:l.skus&&0!==l.skus.length?l.skus[0].stock:null})}}catch(d){a.e(d)}finally{a.f()}t.totalOrders=t.tableData.length,t.currentChange(t.currentPage)}else t.$message.error("获取店铺信息失败")}))},currentChange:function(t){this.currentPage=t;var e=(t-1)*this.pageSize;this.singlePageOrdersList=this.tableData.slice(e,e+this.pageSize)},beforeUpload:function(t){var e=this,o=new FormData;return o.append("file",t),o.append("productId",this.selectedGoodsId),this.$http.post("file/productimg",o).then((function(t){1e4===t.code?e.$message.success("操作成功！"):e.$message.error(t.msg)})),!1}},created:function(){var t=this;this.$http.get("/shop/listshopsbyuserid",{userId:JSON.parse(localStorage.getItem("userInform")).userId}).then((function(e){1e4===e.code?(t.storeId=e.data[0].shopID,t.storeName=e.data[0].shopName,t.storeStatus=e.data[0].status,1===t.storeStatus&&t.$http.get("/index/category-recommends").then((function(e){if(1e4===e.code){var o,a=Object(s["a"])(e.data);try{for(a.s();!(o=a.n()).done;){var r=o.value;t.categories.push({categoryId:r.categoryId,categoryName:r.categoryName})}}catch(l){a.e(l)}finally{a.f()}t.getGoodsList()}else t.$message.error(e.msg)}))):t.$message.error(e.msg)}))}}),i=l,c=(o("42d4"),o("2877")),n=Object(c["a"])(i,a,r,!1,null,null,null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-22a5af06.343003be.js.map